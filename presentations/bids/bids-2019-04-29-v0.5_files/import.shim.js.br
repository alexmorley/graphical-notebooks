console.log("[import] git: 6aea1772b509bec849dc5e39f4277f64b53013e7, stamp: C63AB8136209D351");
!function(e){function n(){}function t(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function o(e,n){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(n):(e._handled=!0,void t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(e){return void r(n.promise,e)}i(n.promise,o)}else(1===e._state?i:r)(n.promise,e._value)}))}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void u(e);if("function"==typeof o)return void c(function(e,n){return function(){e.apply(n,arguments)}}(o,n),e)}e._state=1,e._value=n,u(e)}catch(n){r(e,n)}}function r(e,n){e._state=2,e._value=n,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var n=0,i=e._deferreds.length;n<i;n++)o(e,e._deferreds[n]);e._deferreds=null}function f(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function c(e,n){var t=!1;try{e(function(e){t||(t=!0,i(n,e))},function(e){t||(t=!0,r(n,e))})}catch(e){if(t)return;t=!0,r(n,e)}}var s=setTimeout;t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var i=new this.constructor(n);return o(this,new f(e,t,i)),i},t.all=function(e){var n=Array.prototype.slice.call(e);return new t(function(e,t){function o(r,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var f=u.then;if("function"==typeof f)return void f.call(u,function(e){o(r,e)},t)}n[r]=u,0==--i&&e(n)}catch(e){t(e)}}if(0===n.length)return e([]);for(var i=n.length,r=0;r<n.length;r++)o(r,n[r])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,t){t(e)})},t.race=function(e){return new t(function(n,t){for(var o=0,i=e.length;o<i;o++)e[o].then(n,t)})},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){s(e,0)},t._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t._setImmediateFn=function(e){t._immediateFn=e},t._setUnhandledRejectionFn=function(e){t._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=t:e.Promise||(e.Promise=t)}(this);
!function(){let e,t=e=>{};let r=!1;function n(){return r}function s(){r=!1}let o=null,i=!0;function a(){if(!o){let t=e()||"import.worker.js",r=e=>{try{l=new Worker(e)}catch(e){throw o=null,new Error("Failed to load the web worker. Please contact Figma for support.")}return l.onmessage=d,l};o=i?function(e,t){return new Promise((r,n)=>{let s=new XMLHttpRequest;s.onload=(()=>{s.status>=200&&s.status<400&&r(s.response)}),s.onloadend=(()=>{n(new Error("Failed to download the file importer. Please make sure you're connected to the internet and try again."))}),s.open("GET",e),s.responseType=t,s.send(null)})}(t,"blob").then(e=>r(URL.createObjectURL(e))):new Promise((e,n)=>{e(r(t))})}return o}let l=null,c={},u=0;function d(e){let r=e.data;switch(r.type){case"ConversionFailureResponse":{let e=r;if(e.id in c){let t=c[e.id];delete c[e.id],t.reject({message:e.message,stack:e.stack})}break}case"ConversionSuccessResponse":{let e=r;if(e.id in c){let r=c[e.id];delete c[e.id],n()?(t(100),r.reject({message:"Import canceled",stack:{}})):(t(20),r.resolve(e.result))}break}case"UpdateProgressMessage":{let e=r;t&&t(e.percentage);break}case"LoadFontMessage":{let t=r,n=c[t.id];(n&&n.fontLoader?n.fontLoader.getFont(t.postscript):Promise.reject(null)).then(r=>{let n={type:"FontLoadedMessage",id:t.id,postscript:t.postscript,bytes:r};e.target.postMessage(n,[r.buffer])}).catch(()=>{let r={type:"FontLoadedMessage",id:t.id,postscript:t.postscript,bytes:null};e.target.postMessage(r)});break}default:console.warn("import shim got unsupported message: "+r.type)}}function f(e,t){if(e.length<t.length)return!1;for(let r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0}function g(e){return a().then(t=>new Promise((r,n)=>{let s=e.message.id;c[s]={resolve:r,reject:n,fontLoader:e.fontLoader},t.postMessage(e.message,e.buffers)}))}function p(e){return f(e,[137,80,78,71,13,10,26,10])}function m(e){return f(e,[255,216])}"undefined"!=typeof Fig&&Fig||(Fig={}),e=(()=>Fig.importWorkerURL),Fig.convertFile=function({bytes:e,featureFlags:t,fontLoader:r,isUserFigmaEmployee:s}){return new Promise((o,i)=>{if(!n())if(p(e)||m(e)){let t=URL.createObjectURL(new Blob([e])),n=new Image;n.onerror=(()=>{i({message:"Invalid image",stack:(new Error).stack})}),n.onload=(()=>{g({message:{type:"ImageConversionRequest",id:u++,bytes:e,width:n.width,height:n.height},buffers:[e.buffer],fontLoader:r}).then(o,i),URL.revokeObjectURL(t)}),n.src=t}else g({message:{type:"FileConversionRequest",id:u++,bytes:e,featureFlags:t,isUserFigmaEmployee:s},buffers:[e.buffer],fontLoader:r}).then(o,i)})},Fig.disableWorkerBlob=function(){i=!1},Fig.cancelConversion=function(){console.log("cancelConversion"),r=!0,l&&(l.terminate(),l=null),o&&(o=null);for(let e in c){let t=c[e];delete c[e],t.reject({status:5,message:"Canceled import."})}},Fig.hasCanceled=n,Fig.resetCancel=s,Fig.setUpdateProgressCallback=function(e){t=e},Fig.callUpdateProgressCallback=function(e){t(e)},Fig.extractFilesFromDropEvent=function(e,t){let r=e.dataTransfer,o=Array.prototype.forEach;function i(e,r){if(n())return;let s=new FileReader;s.onload=(()=>{n()?console.log("reader loaded. canceled -- skipping callback"):t(r,new Uint8Array(s.result))}),s.readAsArrayBuffer(e)}if(s(),r.items){let e=!1;if(o.call(r.items,t=>{if(t.webkitGetAsEntry){let r=t.webkitGetAsEntry();if(r){let t=r.name;r.isDirectory?r.getFile("Data",null,e=>e.file(e=>i(e,t))):r.isFile&&r.file(e=>i(e,t)),e=!0}}}),e)return}o.call(r.files,e=>i(e,e.name))},Fig.isProbablyJPEGFile=m,Fig.isProbablyPNGFile=p}();
